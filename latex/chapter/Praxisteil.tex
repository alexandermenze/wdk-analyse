\section{Praxisteil}
% CRISP DM
% Hier noch mal beschreiben das lediglich der Effekt nachgewiesen werden soll, nicht belegt
% Im Zusammenhang mit Nutzung von Indizes erläutern (Grundlage rechtfertigen)

% Optimierung: Jeden Index in ein eigenes Cluster, dann Index weg

Im Praxisteil dieser Arbeit soll zuerst das Problem beschrieben werden und wie es fachlich gelöst werden kann. Dazu gehört auch die Auswahl der Werkzeuge für die Umsetzung. Anschließend folgt die Strukturierung und Planung der Daten. Dies beinhaltet die Erstellung einer begründeten Datenstruktur. In dem Kapitel der \nameref{sec:datenvorbereitung} geht es dann um die Beschaffung, Aufbereitung und das Einlesen der Quelldaten in die Datenbank. Abschließend wird die Auswertung durchgeführt.

\subsection{Problemverständnis und Planung}
% Die konkreten Berechnungen hier einfügen
% Welche Daten werden benötigt?
% Welche Werkzeuge sollen genutzt werden (Wie sollen die Daten angezeigt werden um das Problem zu erläutern?)
% Mengen und Frequenzen von Daten

% anhand von großen Indizes um die Marktentwicklung insgesamt zu betrachten und nicht auf einzelne Aktien zu sehen
% In verschiedenen Ländern und Regionen (ob es Unterschiede gibt)
% Das soll über mehrere Zeiträume analysiert werden um wirklich eine Aussage treffen zu können
% Dazu werden die Daten historisch analysiert (soweit wie diese zurückgehen)
% Benötigt werden die täglichen Kursentwicklungen
% Berechnet wird die Kursentwicklung eines Tages mit der Formel (Schlusskurs Tag - Schlusskurs letzter Tag)
% Das ganze kann dann addiert werden nach Wochentagen um eine Gesamtstatistik zu erhalten

In dieser Auswertung soll untersucht werden ob der Weekend Effect in verschiedenen Regionen aufgetreten ist. Falls er existiert, ist ebenfalls interessant ob der Effekt je nach Zeitraum in der Vergangenheit unterschiedlich ausgeprägt war. Dafür werden historische Daten von yahoo Finance mit der Programmiersprache Python und der Datenbank OrientDB ausgewertet. Um bei der Auswertung möglichst die gesamte Entwicklung eines Marktes einzufangen und nicht Anomalien in den Kursverläufen einzelner Aktien zu untersuchen werden dafür ausschließlich Daten von breiter aufgestellten Aktienindizes verwendet. Benötigt werden dazu für jeden zu untersuchenden Index tägliche Daten. Diese sollten den Tagesschlusskurs, also den Kurs bei Schließung der Börse, und das Tagesdatum enthalten. Dann kann durch das Iterieren über alle Tage jeweils aus dem Schlusskurs des Vortages und dem Schlusskurs des aktuellen Tages die Differenz gebildet werden. Diese Differenzen nach Wochentagen summiert ergeben dann die absoluten Kursveränderungen an den jeweiligen Tagen. Diese sollen anschließend mit der Python Bibliothek \enquote{matplotlib} visualisiert und verglichen werden.

Außerdem ist interessant ob bestimmte Wochentage insgesamt häufiger positiv oder negativ ausfallen. Dafür müssen alle Tage je nach Kursentwicklung gezählt werden. Auch dies soll grafisch dargestellt werden.

% Bibliotheken
% Normalisierung der Ergebnisse?

\subsection{Datenverständnis}
% Datenstruktur und Format, Menge, Zeitauflösung etc.
% Was ist die ISIN?
% Wie und warum habe ich aufgebaut
% Adj_Close vs Close

% Daten kommen von yahoo Finance

Die Daten für die Auswertung kommen von yahoo Finance. Um diese dauerhaft zur späteren Nachverfolgbarkeit zu behalten, wurde der Download als \gls{CSV} Datei statt der \gls{HTTP}-Schnittstelle gewählt. Es wurden Datensätze für die folgenden Aktienindizes gespeichert:

\begin{itemize}
    \item DAX (Deutscher Aktienindex) - Die größten 30 Unternehmen an deutschen Börsen. Daten seit 1987.
    \item Dow Jones Industrial Average - Die größten 30 Unternehmen an amerikanischen Börsen. Daten seit 1992.
    \item CAC40 - Die größten 40 Unternehmen an der Pariser Börse. Daten seit 1980.
    \item S\&P 500 - Die größten 500 Unternehmen an amerikanischen Börsen. Daten seit 1970.
    \item Euronext 100 - Die größten 100 börsennotierten Unternehmen aus den Ländern Frankreich, den Niederlanden, Belgien, Irland und Portugal. Daten seit 2000.
\end{itemize}

Für jeden Handelstag an der jeweils lokalen Börse existiert ein Datensatz. Diese enthalten das Datum des Tages, den Kurs bei Öffnung der Börse, den Kurs bei Schließung der Börse, das Maximum und Minimum an diesem Tag und das Handelsvolumen. Außerdem wird eine bereinigter Schlusskurs angegeben. Dieser rechnet Einflüsse wie Gewinnausschüttungen oder die Teilung von Aktien\footnote{Wenn ein Aktienpreis zu hoch steigt, kann das Unternehmen seine Aktien teilen. Bei einer 2:1 Teilung wird die Menge der Aktien verdoppelt und dafür der Preis halbiert. Aktien können auch andersherum zusammengeführt werden.} aus dem Schlusskurs heraus um Kurssprünge zu vermeiden. Für die Datenanalyse werden lediglich das Datum, der Öffnungs- und bereinigte Schlusskurs benötigt.

% Wenn keine Ideen mehr Beispieldatensatz einfügen

\subsection{Datenvorbereitung}
\label{sec:datenvorbereitung}
% Einlesen der Daten und Aufbereitung
%   Behandeln von Ausreißern und fehlenden Daten zwischen den Datensätzen
%   Wie geht man mit unterschiedlicher Anzahl Wochentagen um? (Normalisierung)
% Format der Dokumente und Wahl der Tabellen
% ISIN
% CSV Format
% Schreiben der Daten in die Datenbank
% Erstellung des Datenbankindex
% Konfiguration

Um die Daten einlesen zu können musste zuerst die Datenbank aufgesetzt werden. Diese wurde als Docker Container gehostet. Da es Inkompatibilitäten zwischen der Bibliothek PyOrient mit der neusten Version der Datenbank gibt, wurde die Version 2.2.35 der OrientDB genutzt. Die Verbindungs- und Anmeldedaten werden zur Laufzeit des Python Skriptes aus einer \gls{YAML}-Konfigurationsdatei geladen.

Als nächstes wurde sich mit der Aufbereitung und dem Einpflegen in die Datenbank beschäftigt. Um die Daten auszulesen wurde die Python Bibliothek \enquote{pandas} verwendet. Diese erlaubt das Lesen von tabellarischen Daten aus einer Vielzahl an Datenformaten und Quellen.

\subsection{Auswertung der Daten}
% Laden der Daten aus der Datenbank
% Generierung der Auswertung mit Verweis auf das Problemverständnis
% Erstellung der Grafiken
% Zahlenoutput der Auswertung

\clearpage